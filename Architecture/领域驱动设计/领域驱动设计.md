

### 限界上下文
一个由显示边界限定的特定

限界上下文是软件对于问题域的一个特定的，有限的解决方案。


### 实体
- 唯一id
- 可修改

可以把setter/getter方法，重命名为更符合领域模型的术语。
比如Tenant具有激活和去激活的行为，则把setter/getter方法改为active()和deactive()更合适。

### 值对象
- 状态无关
- 不可修改(不变)


### 领域服务和应用服务
当某个操作不合适放在Entity和VO中时，就需要考虑领域服务了。
应用服务不会处理业务逻辑，而领域服务恰恰处理的是业务逻辑，也就是说可以处理多个领域对象。

### 聚合
聚合定义了一组具有内聚关系的相关对象的集合，我们把聚合看作是一个修改数据的最小原子单元。

聚合根，每个聚合都有一个根对象，根对象管理聚合内的其他子对象（实体、值对象）；聚合之间的交互都是通过聚合根来交互，不能绕过聚合根去直接和聚合下的子实体进行交互。

上面的例子中，Car、Wheel、Position、Tire四个对象构成一个聚合，其中Car是聚合根；Customer也是聚合根，Customer不能直接访问Car下的Tire（子实体），而是只能通过聚合根Car来访问。

上面表达了一个关于聚合的一致性设计原则：聚合内的数据修改，是ACID强一致性的；跨聚合的数据修改，是最终一致性的。遵守这个原则，可以让我们最大化的降低并发冲突，从而最大化的提高整个系统的吞吐。

聚合设计原则：
- 设计小聚合
- 通过唯一ID引用其他聚合
- 在边界之外使用最终一致性

在DDD中有一条原则：一个业务用例对应一个事务，一个事务对应一个聚合根，也即在一次事务中，只能对一个聚合根进行操作。  


### 资源库
资源库和聚合是一一对应的。实体和值对象不需要资源库。

### 领域事件
Event Sourcing（事件溯源）
因为是用事件来表示对象的状态，而事件是只会增加不会修改。这就能让数据库里的表示对象的数据非常稳定，不可能存在DELETE或UPDATE等操作。因为一个事件就是表示一个事实，事实是不能被磨灭或修改的。这种特性可以让领域模型非常稳定，在数据库级别不会产生并发更新同一条数据的问题。



### 参考
在微服务中使用领域事件   滕云


